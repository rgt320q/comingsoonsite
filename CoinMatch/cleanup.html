<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Firebase DB Cleanup</title>
</head>
<body>
    <h1>Temporary Database Cleanup Tool</h1>
    <p>Click the button to delete ALL data under the '/games' path in your database.</p>
    <button id="delete-button" style="font-size: 20px; padding: 10px; background-color: red; color: white;">DELETE ALL GAMES</button>
    <p id="status"></p>

    <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <!-- Add SDKs for Firebase products you want to use -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>

    <!-- Your web app's Firebase configuration -->
    <script src="./firebase-config.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const deleteBtn = document.getElementById('delete-button');
            const statusP = document.getElementById('status');

            if (typeof firebase === 'undefined' || typeof firebase.database === 'undefined') {
                statusP.textContent = 'ERROR: Firebase scripts did not load correctly.';
                statusP.style.color = 'red';
                return;
            }
            
            // The database object is created in firebase-config.js
            if (typeof database === 'undefined') {
                 statusP.textContent = 'ERROR: The "database" object is not defined. Check firebase-config.js.';
                 statusP.style.color = 'red';
                 return;
            }

            deleteBtn.addEventListener('click', () => {
                if (confirm("Are you sure you want to permanently delete all games? This cannot be undone.")) {
                    statusP.textContent = 'Deleting...';
                    database.ref('games').remove()
                        .then(() => {
                            statusP.textContent = 'SUCCESS: All games have been deleted.';
                            statusP.style.color = 'green';
                            alert('SUCCESS: All games have been deleted.');
                        })
                        .catch((error) => {
                            statusP.textContent = `ERROR: ${error.message}`;
                            statusP.style.color = 'red';
                            alert(`ERROR: ${error.message}`);
                        });
                }
            });
        });
    </script>
</body>
</html>
